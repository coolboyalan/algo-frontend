(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[434],{7434:(e,t,a)=>{"use strict";a.d(t,{default:()=>O});var s=a(95155),r=a(12115),l=a(19946);let n=(0,l.A)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),i=(0,l.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),o=(0,l.A)("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),c=(0,l.A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),d=(0,l.A)("cross",[["path",{d:"M4 9a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h4a1 1 0 0 1 1 1v4a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-4a1 1 0 0 1 1-1h4a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-4a1 1 0 0 1-1-1V4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4a1 1 0 0 1-1 1z",key:"1xbrqy"}]]),u=(0,l.A)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),m=(0,l.A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),x=(0,l.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),h=(0,l.A)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),y=(0,l.A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),g=(0,l.A)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),p=(0,l.A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),b=(0,l.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var f=a(54861);let v=(0,l.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),j=(0,l.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var k=a(1243),w=a(54416);let N=e=>{let{isOpen:t,onClose:a,title:r,children:l}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4 transition-opacity duration-300 ease-in-out",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:r}),(0,s.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close modal",children:(0,s.jsx)(w.A,{size:20})})]}),(0,s.jsx)("div",{className:"p-6 overflow-y-auto flex-grow",children:l})]})}):null},S=(0,l.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),C=(0,l.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),A=e=>{let{item:t,formFields:a,onSubmit:l,onCancel:n,dynamicSelectOptions:i={}}=e,[o,c]=(0,r.useState)({}),[d,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e={};a&&a.forEach(a=>{let s="";if(t&&void 0!==t[a.key]?s=t[a.key]:void 0!==a.defaultValue&&(s=a.defaultValue),"select"===a.type||"select_dynamic"===a.type){let e=s;s=null==e?"":String(e)}if("date"===a.type&&s)try{s=new Date(s).toISOString().split("T")[0]}catch(e){console.warn("Invalid date value for field ".concat(a.key,":"),s),s=""}e[a.key]=s}),c(e),x(null)},[t,a]);let h=(e,t)=>{c(a=>({...a,[e]:t})),m&&x(null)},y=async e=>{e.preventDefault(),x(null),u(!0);let t={...o};a.forEach(e=>{"select"===e.type&&("true"===t[e.key]||"false"===t[e.key])&&e.options&&e.options.some(e=>"boolean"==typeof e.value)&&(t[e.key]="true"===t[e.key]),"number"!==e.type||""===t[e.key]||null===t[e.key]||isNaN(Number(t[e.key]))||(t[e.key]=Number(t[e.key]))});try{let e=await l(t);e&&!e.success&&x(e.error||"Submission failed. Please check your input and try again.")}catch(e){x(e.message||"An unexpected error occurred during submission.")}finally{u(!1)}};return a&&0!==a.length?(0,s.jsxs)("form",{onSubmit:y,className:"space-y-6 p-1",children:[m&&(0,s.jsxs)("div",{role:"alert",className:"p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg border border-red-300 flex items-start",children:[(0,s.jsx)(S,{size:20,className:"mr-2 flex-shrink-0 text-red-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:"Submission Error:"}),(0,s.jsx)("p",{children:m})]})]}),a.map(e=>{var t;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"form-field-".concat(e.key),className:"block text-sm font-medium text-gray-800 mb-1.5",children:[e.label," ",e.required&&(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),"select_dynamic"===e.type?(()=>{let t=i[e.optionsSourceKey],a=Array.isArray(t)?t:[];return(0,s.jsxs)("select",{id:"form-field-".concat(e.key),name:e.key,value:o[e.key]||"",onChange:t=>h(e.key,t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:text-gray-500",required:e.required,disabled:d||e.disabled,children:[(0,s.jsx)("option",{value:"",children:e.placeholder||"Select ".concat(e.label,"...")}),a.map(t=>(0,s.jsxs)("option",{value:t[e.optionValueKey||"id"],children:[" ",t[e.optionLabelKey||"name"]," "]},t[e.optionValueKey||"id"]))]})})():"select"===e.type?(0,s.jsxs)("select",{id:"form-field-".concat(e.key),name:e.key,value:o[e.key]||"",onChange:t=>h(e.key,t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:text-gray-500",required:e.required,disabled:d||e.disabled,children:[(0,s.jsx)("option",{value:"",children:e.placeholder||"Select ".concat(e.label,"...")}),null==(t=e.options)?void 0:t.map(e=>(0,s.jsxs)("option",{value:String(e.value),children:[" ",e.label," "]},String(e.value)))]}):"textarea"===e.type?(0,s.jsx)("textarea",{id:"form-field-".concat(e.key),name:e.key,value:o[e.key]||"",onChange:t=>h(e.key,t.target.value),rows:e.rows||3,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:text-gray-500",required:e.required,disabled:d||e.disabled,placeholder:e.placeholder}):"date"===e.type?(0,s.jsx)("input",{type:"date",id:"form-field-".concat(e.key),name:e.key,value:o[e.key]||"",onChange:t=>h(e.key,t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:text-gray-500",required:e.required,disabled:d||e.disabled}):"password"===e.type?(0,s.jsx)("input",{type:"password",id:"form-field-".concat(e.key),name:e.key,value:o[e.key]||"",onChange:t=>h(e.key,t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:text-gray-500",required:e.required,disabled:d||e.disabled,placeholder:e.placeholder}):(0,s.jsx)("input",{type:e.type||"text",id:"form-field-".concat(e.key),name:e.key,value:o[e.key]||"",onChange:t=>h(e.key,t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:text-gray-500",required:e.required,readOnly:e.readOnly||e.disabled,disabled:d||e.disabled,placeholder:e.placeholder}),e.description&&(0,s.jsx)("p",{className:"mt-1.5 text-xs text-gray-500",children:e.description})]},e.key)}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-5",children:[(0,s.jsx)("button",{type:"button",onClick:n,className:"px-5 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400 disabled:opacity-70",disabled:d,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-5 py-2.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-blue-400 disabled:opacity-70",disabled:d,children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C,{size:16,className:"mr-2"})," Save Changes"]})})]})]}):(0,s.jsx)("p",{className:"text-gray-600",children:"Form fields not configured for this item."})};var z=a(18999),M=a(56278),I=a(49509);let E=(e,t)=>{if(!e||"string"!=typeof t||""===t.trim())return;let a=t.split("."),s=e;for(let e=0;e<a.length;e++){let t=a[e];if(null===s||"object"!=typeof s||!Object.prototype.hasOwnProperty.call(s,t))return;s=s[t]}return s},O=e=>{let{apiEndpoint:t="/api/default-endpoint",columns:a=[],filters:l=[],itemKeyField:w="id",formFields:S=[],pageTitle:C="Data Management",canAddItem:O=!0,customLink:D,dynamicSelectDataSources:F={},dynamicFilterOptionsData:q={},customActions:T=[],mobileColumns:L=[],disableMobilePagination:V=!1}=e;L.length||(L=a.map(e=>e.key));let P=(0,z.useRouter)(),[K,U]=(0,r.useState)([]),[B,_]=(0,r.useState)(1),[H,R]=(0,r.useState)(10),[W,J]=(0,r.useState)({key:null,direction:"asc"}),[G,Q]=(0,r.useState)(""),[Y,Z]=(0,r.useState)("id"),[$,ee]=(0,r.useState)({}),[et,ea]=(0,r.useState)(!1),[es,er]=(0,r.useState)({start:null,end:null}),[el,en]=(0,r.useState)(0),[ei,eo]=(0,r.useState)(!1),[ec,ed]=(0,r.useState)(null),[eu,em]=(0,r.useState)({type:"",message:""}),[ex,eh]=(0,r.useState)(!1),[ey,eg]=(0,r.useState)(!1),[ep,eb]=(0,r.useState)(!1),[ef,ev]=(0,r.useState)(!1),[ej,ek]=(0,r.useState)(!1),[ew,eN]=(0,r.useState)(null),eS=window.NEXT_PUBLIC_API_BASE_URL||void 0!==I&&I.env&&"https://algo-backend.thealgoman.com"||"";(0,r.useEffect)(()=>{let e=()=>{eh(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let eC=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s="".concat(eS).concat(e),r=localStorage.getItem("token"),l={"Content-Type":"application/json"};r&&(l.Authorization="Bearer ".concat(r));let n=a;a&&("POST"===t||"PUT"===t)&&(n=Object.entries(a).reduce((e,t)=>{let[a,s]=t;return null!=s&&""!==s&&(e[a]=s),e},{}));try{let e=await fetch(s,{method:t,headers:l,...n&&("POST"===t||"PUT"===t)&&{body:JSON.stringify(n)}}),a=await e.json().catch(()=>e.text());if(!e.ok){let t="object"==typeof a&&null!==a&&a.message?a.message:"string"==typeof a&&""!==a.trim()?a:"Operation failed with status ".concat(e.status);throw Error(t)}return a}catch(e){throw console.error("API call failed for ".concat(t," ").concat(s,":"),e),e}},eA=async(e,t)=>{if(t.actionUrl){eo(!0);try{let a=await eC("".concat(t.actionUrl,"/").concat(e[w]),t.method||"PUT",t.payload||{});em({type:"success",message:a.message||t.successMessage||"Action completed successfully!"}),ez()}catch(e){em({type:"error",message:e.message||t.errorMessage||"Failed to perform action"})}finally{eo(!1)}}},ez=(0,r.useCallback)(async()=>{eo(!0),ed(null);let e=new URLSearchParams;e.append("page",B.toString()),e.append("limit",H.toString()),W.key&&(e.append("sortBy",W.key),e.append("sortOrder",W.direction)),G&&(e.append("search",G),"all"!==Y&&e.append("searchIn",Y)),es.start&&e.append("startDate",es.start),es.end&&e.append("endDate",es.end),Object.entries($).forEach(t=>{let[a,s]=t;null!=s&&""!==String(s).trim()&&e.append(a,String(s))});let a="".concat(eS).concat(t,"?").concat(e.toString());try{var s,r,l;let e=localStorage.getItem("token"),t={};e&&(t.Authorization="Bearer ".concat(e));let n=await fetch(a,{headers:t}),i=await n.json().catch(async()=>{throw Error(await n.text())});if(!n.ok)throw Error(i.message||"Failed to fetch data (status: ".concat(n.status,")"));U((null==i||null==(s=i.data)?void 0:s.result)||[]),en((null==i||null==(l=i.data)||null==(r=l.pagination)?void 0:r.totalItems)||0)}catch(e){console.error("Fetch data error:",e),ed(e.message||"Failed to load data."),U([]),en(0),em({type:"error",message:e.message||"Failed to load data."})}finally{eo(!1)}},[t,eS,B,H,W,G,Y,$,es,w]);(0,r.useEffect)(()=>{ez()},[ez]);let eM=async e=>{try{let t=await fetch("".concat("https://algo-backend.thealgoman.com","/api/broker/").concat(e.brokerId));if(!t.ok)throw Error("HTTP error! Status: ".concat(t.status));if(!(await t.json()).data)return void window.alert("Please add broker first");P.push("".concat(e.loginUrl))}catch(e){window.alert("Unable to login, Internal Error")}},eI=e=>{eN(e),eg(!0)},eE=e=>{eN(e),eb(!0)},eO=e=>{eN(e),ek(!0)},eD=async e=>{eo(!0);try{let a=await eC(t,"POST",e);em({type:"success",message:a.message||"Item created successfully!"}),ev(!1),ez()}catch(e){em({type:"error",message:e.message||"Failed to create item."})}finally{eo(!1)}},eF=async e=>{if(!ew||void 0===ew[w])return void em({type:"error",message:"No item selected or item has no ID."});let a=ew[w];eo(!0);try{let s=await eC("".concat(t,"/").concat(a),"PUT",e);em({type:"success",message:s.message||"Item updated successfully!"}),eb(!1),eN(null),ez()}catch(e){em({type:"error",message:e.message||"Failed to update item."})}finally{eo(!1)}},eq=async()=>{if(!ew||void 0===ew[w])return void em({type:"error",message:"No item selected or item has no ID."});let e=ew[w];eo(!0);try{let a=await eC("".concat(t,"/").concat(e),"DELETE");em({type:"success",message:a.message||"Item deleted successfully!"}),ek(!1),eN(null),ez()}catch(e){em({type:"error",message:e.message||"Failed to delete item."})}finally{eo(!1)}},eT=[...a.map(e=>({...e,showOnMobile:L.includes(e.key)})),{key:"actions",label:"Actions",type:"actions",sortable:!1,showOnMobile:!0}],eL=e=>{let t=eT.find(t=>t.key===e);if(!t||!1===t.sortable)return;let a="asc";W.key===e&&"asc"===W.direction&&(a="desc"),J({key:e,direction:a}),_(1)},eV=(e,t)=>{ee(a=>({...a,[e]:"all"===t||""===t?null:t})),_(1)},eP=e=>{Q(e),_(1)},eK=e=>{Z(e),_(1)},eU=e=>{er(e),_(1)},eB=el>0?Math.ceil(el/H):0,e_=K.length>0?(B-1)*H+1:0,eH=(B-1)*H+K.length,eR=(e,t)=>{if(t.render&&"function"==typeof t.render)return t.render(e,t);if("actions"===t.type)return(0,s.jsxs)("div",{className:"flex items-center space-x-1.5",children:[D&&(0,s.jsx)("button",{onClick:()=>eM(e),className:"text-blue-600 hover:text-blue-800 p-1.5 rounded hover:bg-blue-100 transition-colors",title:"View",children:(0,s.jsx)(n,{size:16})}),(0,s.jsx)("button",{onClick:()=>eI(e),className:"text-blue-600 hover:text-blue-800 p-1.5 rounded hover:bg-blue-100 transition-colors",title:"View",children:(0,s.jsx)(i,{size:16})}),(0,s.jsx)("button",{onClick:()=>eE(e),className:"text-green-600 hover:text-green-800 p-1.5 rounded hover:bg-green-100 transition-colors",title:"Edit",children:(0,s.jsx)(o,{size:16})}),(0,s.jsx)("button",{onClick:()=>eO(e),className:"text-red-600 hover:text-red-800 p-1.5 rounded hover:bg-red-100 transition-colors",title:"Delete",children:(0,s.jsx)(c,{size:16})}),T.map((t,a)=>(0,s.jsx)("button",{onClick:()=>eA(e,t),className:"".concat(t.color||"text-gray-600 hover:text-gray-800"," ").concat(t.bgColor||"hover:bg-gray-100"," p-1.5 rounded transition-colors"),title:t.title,children:t.icon||(0,s.jsx)(d,{size:16})},a))]});let a=E(e,t.key);if("enum"===t.type){var r;let e=null==(r=t.enumConfig)?void 0:r.find(e=>String(e.value)===String(a));return(0,s.jsx)("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium whitespace-nowrap ".concat((null==e?void 0:e.bgColor)||"bg-gray-100"," ").concat((null==e?void 0:e.textColor)||"text-gray-800"),children:(null==e?void 0:e.display)||(null!=a?String(a):"")})}if("direction"===t.type)return(0,s.jsxs)("span",{className:"flex items-center px-2.5 py-1 rounded-full text-xs font-medium whitespace-nowrap ".concat("long"===a?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:["long"===a?(0,s.jsx)(u,{size:14,className:"mr-1"}):(0,s.jsx)(m,{size:14,className:"mr-1"}),String(a)]});if("date"===t.type&&a)try{return(0,s.jsx)("div",{className:"text-sm text-gray-700 whitespace-nowrap",children:new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})}catch(e){return(0,s.jsx)("div",{className:"text-sm text-red-500",children:"Invalid Date"})}if("currency"===t.type&&("number"==typeof a||null!=a&&!isNaN(parseFloat(String(a)))))return(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 whitespace-nowrap",children:new Intl.NumberFormat("en-US",{style:"currency",currency:t.currency||"USD"}).format(Number(a))});let l=null==a?"":"object"==typeof a?JSON.stringify(a):String(a);return(0,s.jsx)("div",{className:"text-sm text-gray-700 whitespace-nowrap truncate",title:l,style:{maxWidth:"auto"},children:l})};return(0,s.jsx)(M.A,{children:(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-lg w-full overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-grow max-w-xl",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(x,{size:18,className:"text-gray-400"})}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-2 flex items-center",children:(0,s.jsx)("select",{value:Y,onChange:e=>eK(e.target.value),className:"h-full bg-transparent border-none text-sm text-gray-500 focus:ring-0 pr-7 appearance-none",children:a.filter(e=>!1!==e.searchable&&"actions"!==e.type).map(e=>(0,s.jsx)("option",{value:e.key,children:e.label},e.key))})}),(0,s.jsx)("input",{type:"text",placeholder:"Search...",className:"text-gray-600 pl-10 pr-28 py-2.5 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all text-sm",value:G,onChange:e=>eP(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 flex-wrap",children:[O&&(0,s.jsxs)("button",{onClick:()=>{eN(null),ev(!0)},className:"flex items-center px-4 py-2.5 rounded-lg border text-sm font-medium transition-all bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-300 border-blue-500",children:[(0,s.jsx)(h,{size:16,className:"mr-2"})," Add New"]}),l&&l.length>0&&(0,s.jsxs)("button",{onClick:()=>ea(!et),className:"flex items-center px-4 py-2.5 rounded-lg border text-sm font-medium transition-all ".concat(et?"bg-blue-50 text-blue-600 border-blue-300":"bg-white text-gray-700 border-gray-300 hover:border-gray-400"),children:[(0,s.jsx)(y,{size:16,className:"mr-2"})," Filters"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 bg-white rounded-lg border border-gray-300 px-3 py-1.5 text-sm hover:border-gray-400 transition-colors",children:[(0,s.jsx)(g,{size:16,className:"text-gray-500"}),(0,s.jsx)("input",{type:"date",className:"bg-transparent border-none focus:ring-0 text-sm text-gray-700 w-28",value:es.start||"",onChange:e=>eU({...es,start:e.target.value})}),(0,s.jsx)("span",{className:"text-gray-400 mx-1",children:"to"}),(0,s.jsx)("input",{type:"date",className:"bg-transparent border-none focus:ring-0 text-sm text-gray-700 w-28",value:es.end||"",onChange:e=>eU({...es,end:e.target.value})}),(es.start||es.end)&&(0,s.jsx)("button",{onClick:()=>{er({start:null,end:null}),_(1)},className:"ml-1 text-gray-400 hover:text-gray-600",children:(0,s.jsx)(X,{size:14})})]})]})]}),et&&l&&l.length>0&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200 animate-fadeIn",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-700 text-xs uppercase tracking-wider",children:"Filter by:"}),(0,s.jsx)("button",{onClick:()=>ea(!1),className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)(X,{size:16})})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:l.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"filter-".concat(e.key),className:"block text-xs font-medium text-gray-600 mb-1.5",children:e.label}),"boolean"===e.type?(0,s.jsxs)("select",{id:"filter-".concat(e.key),className:"text-black w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all",value:void 0===$[e.key]||null===$[e.key]?"all":String($[e.key]),onChange:t=>{let a;a="true"===t.target.value||"false"!==t.target.value&&null,eV(e.key,a)},children:[(0,s.jsx)("option",{value:"all",children:"All"}),(0,s.jsx)("option",{value:"true",children:e.trueLabel||"True"}),(0,s.jsx)("option",{value:"false",children:e.falseLabel||"False"})]}):"select"===e.type?(0,s.jsxs)("select",{id:"filter-".concat(e.key),className:"text-black w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all",value:$[e.key]||"all",onChange:t=>eV(e.key,"all"===t.target.value?null:t.target.value),children:[(0,s.jsxs)("option",{value:"all",children:["All ",e.label]}),e.optionsSourceKey&&q&&q[e.optionsSourceKey]?(q[e.optionsSourceKey]||[]).map(t=>(0,s.jsx)("option",{value:t[e.optionValueKey||"id"],children:t[e.optionLabelKey||"name"]},t[e.optionValueKey||"id"])):(e.options||[]).map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]}):(0,s.jsx)("input",{id:"filter-".concat(e.key),type:"number"===e.type?"number":"date"===e.type?"date":"text",placeholder:"".concat(e.label,"..."),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 transition-all",value:$[e.key]||"",onChange:t=>eV(e.key,t.target.value)})]},e.key))})]})]}),eu.message&&(0,s.jsxs)("div",{className:"px-6 py-3 border-b text-sm font-medium transition-opacity duration-300 ease-in-out ".concat("success"===eu.type?"bg-green-50 text-green-700 border-green-200":""," ").concat("error"===eu.type?"bg-red-50 text-red-700 border-red-200":""," ").concat("info"===eu.type?"bg-blue-50 text-blue-700 border-blue-200":""),children:[eu.message,(0,s.jsx)("button",{onClick:()=>em({type:"",message:""}),className:"float-right font-bold text-lg leading-none",children:"\xd7"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsx)("div",{className:"min-w-full inline-block align-middle",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50 sticky top-0 z-10",children:(0,s.jsx)("tr",{children:eT.map(e=>(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider group whitespace-nowrap ".concat(e.showOnMobile?"":"hidden sm:table-cell"),onClick:()=>eL(e.key),style:{cursor:!1!==e.sortable?"pointer":"default"},children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-700 group-hover:text-gray-900",children:e.label}),W.key===e.key&&(0,s.jsx)("span",{className:"ml-2 text-blue-500",children:"asc"===W.direction?(0,s.jsx)(p,{size:16}):(0,s.jsx)(b,{size:16})})]})},e.key))})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ei&&0===K.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:eT.length,className:"px-6 py-12 text-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[(0,s.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("p",{children:"Loading data..."})]})})}):ec&&0===K.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:eT.length,className:"px-6 py-12 text-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-red-600",children:[(0,s.jsx)(f.A,{size:32,className:"mb-3 text-red-400"}),(0,s.jsx)("p",{className:"text-lg font-medium",children:"Error loading data"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:ec}),(0,s.jsx)("button",{onClick:ez,className:"mt-4 px-4 py-2 bg-blue-50 text-blue-600 rounded-md text-sm font-medium hover:bg-blue-100",children:"Try Again"})]})})}):ei||0!==K.length?K.map(e=>(0,s.jsx)("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:eT.map(t=>(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm ".concat(t.showOnMobile?"":"hidden sm:table-cell"),children:eR(e,t)},"".concat(e[w],"-").concat(t.key)))},e[w])):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:eT.length,className:"px-6 py-12 text-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[(0,s.jsx)(x,{size:32,className:"mb-3 text-gray-400"}),(0,s.jsx)("p",{className:"text-lg font-medium",children:"No matching records found"}),(0,s.jsx)("button",{onClick:()=>{Q(""),Z("all"),ee({}),er({start:null,end:null}),J({key:null,direction:"asc"}),_(1)},className:"mt-3 px-4 py-2 bg-blue-50 text-blue-600 rounded-md text-sm font-medium hover:bg-blue-100",children:"Clear all filters"})]})})})})]})})}),eB>0&&(0,s.jsxs)("div",{className:"bg-white border-t border-gray-200 px-6 py-4 flex flex-col sm:flex-row items-center justify-between gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"text-gray-700",children:["Showing"," ",(0,s.jsx)("span",{className:"font-medium",children:e_})," to"," ",(0,s.jsx)("span",{className:"font-medium",children:eH})," of"," ",(0,s.jsx)("span",{className:"font-medium",children:el})," results"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Rows:"}),(0,s.jsx)("select",{value:H,onChange:e=>{R(Number(e.target.value)),_(1)},className:"border border-gray-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 shadow-sm text-gray-700",children:[10,20,50,100].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]})]}),V&&ex?null:(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("button",{onClick:()=>_(e=>Math.max(e-1,1)),disabled:1===B||ei,className:"p-2 rounded-md border ".concat(1===B||ei?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-600 hover:bg-gray-50"," transition-colors shadow-sm"),children:(0,s.jsx)(v,{size:18})}),(()=>{let e=[];if(!eB||eB<=0)return[];if(eB<=5)for(let t=1;t<=eB;t++)e.push(t);else{let t=Math.max(1,B-Math.floor(2.5)),a=Math.min(eB,t+5-1);a-t+1<5&&(1===t?a=Math.min(eB,t+5-1):a===eB&&(t=Math.max(1,a-5+1))),t>1&&(e.push(1),t>2&&e.push("..."));for(let s=t;s<=a;s++)e.push(s);a<eB&&(a<eB-1&&e.push("..."),e.push(eB))}return e})().map((e,t)=>(0,s.jsx)("button",{onClick:()=>"number"==typeof e?_(e):null,className:"w-9 h-9 rounded-md flex items-center justify-center font-medium ".concat(e===B?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"," border transition-colors ").concat("number"!=typeof e||ei?"pointer-events-none opacity-60":""," shadow-sm"),disabled:"..."===e||ei,children:e},t)),(0,s.jsx)("button",{onClick:()=>_(e=>Math.min(e+1,eB||1)),disabled:B===eB||0===eB||ei,className:"p-2 rounded-md border ".concat(B===eB||0===eB||ei?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-600 hover:bg-gray-50"," transition-colors shadow-sm"),children:(0,s.jsx)(j,{size:18})})]})]}),(0,s.jsx)(N,{isOpen:ey,onClose:()=>eg(!1),title:"View ".concat(C.replace("Management","").trim()," Details"),children:ew&&(0,s.jsx)("div",{className:"space-y-3 text-sm",children:a.filter(e=>"actions"!==e.type&&"actions"!==e.key).map(e=>(0,s.jsxs)("div",{className:"flex border-b py-2.5 last:border-b-0",children:[(0,s.jsxs)("strong",{className:"w-2/5 font-semibold text-gray-700",children:[e.label,":"]}),(0,s.jsx)("div",{className:"w-3/5 text-gray-600 flex items-center",children:eR(ew,e)})]},e.key))})}),(0,s.jsx)(N,{isOpen:ep,onClose:()=>eb(!1),title:"Edit ".concat(C.replace("Management","").trim()),children:ew&&S.length>0&&(0,s.jsx)(A,{item:ew,formFields:S,onSubmit:eF,onCancel:()=>eb(!1),itemKeyField:w,dynamicSelectOptions:F})}),(0,s.jsx)(N,{isOpen:ef,onClose:()=>ev(!1),title:"Create New ".concat(C.replace("Management","").trim()),children:S.length>0&&(0,s.jsx)(A,{item:null,formFields:S,onSubmit:eD,onCancel:()=>ev(!1),itemKeyField:w,dynamicSelectOptions:F})}),(0,s.jsx)(N,{isOpen:ej,onClose:()=>ek(!1),title:"Confirm Deletion",size:"sm",children:ew&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)(k.A,{size:24,className:"text-red-500 mr-3 flex-shrink-0"}),(0,s.jsxs)("p",{className:"text-gray-700 text-md",children:["Are you sure you want to delete this item? ",(0,s.jsx)("br",{}),"This action cannot be undone."]})]}),(0,s.jsxs)("div",{className:"text-sm bg-gray-50 p-3 rounded-md mb-6",children:[(0,s.jsx)("strong",{children:"Item ID:"})," ",ew[w],a.find(e=>"name"===e.key&&ew.name)?" - ".concat(ew.name):a.find(e=>E(ew,e.key)&&e.key.includes("name"))?" - ".concat(E(ew,a.find(e=>e.key.includes("name")).key)):""]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>ek(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300",children:"Cancel"}),(0,s.jsxs)("button",{onClick:eq,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors flex items-center focus:outline-none focus:ring-2 focus:ring-red-400",disabled:ei,children:[ei?(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,s.jsx)(c,{size:16,className:"mr-2"}),"Delete"]})]})]})})]})})}},29434:(e,t,a)=>{Promise.resolve().then(a.bind(a,7434))},56278:(e,t,a)=>{"use strict";a.d(t,{A:()=>y});var s=a(95155),r=a(12115),l=a(66766),n=a(57340),i=a(87649),o=a(76356),c=a(40235),d=a(27414),u=a(71007),m=a(54416),x=a(74783),h=a(34835);let y=e=>{let{pageTitle:t,children:a}=e,[y,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1),f=(0,r.useRef)(null),[v,j]=(0,r.useState)(""),[k,w]=(0,r.useState)(!1),[N,S]=(0,r.useState)("User Name"),[C,A]=(0,r.useState)("user@example.com"),[z,M]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("role");if(!e){window.location.href="/login";return}w(!0),"admin"===t?M([{label:"Dashboard",icon:n.A,path:"/dashboard"},{label:"Asset",icon:()=>(0,s.jsx)("span",{className:"font-bold text-2xl text-gray-400 mr-1",children:"₹"}),path:"/assets"},{label:"Daily Asset",icon:i.A,path:"/daily-asset"},{label:"Trades",icon:o.A,path:"/trades"},{label:"Broker Keys",icon:c.A,path:"/brokerKeys/admin"},{label:"Brokers",icon:d.A,path:"/brokers"},{label:"Users",icon:u.A,path:"/users"}]):"user"===t&&M([{label:"Dashboard",icon:n.A,path:"/dashboard"},{label:"Trades",icon:o.A,path:"/trades"},{label:"Broker Keys",icon:c.A,path:"/brokerKeys"}]);let a=localStorage.getItem("name"),r=localStorage.getItem("email");a&&S(a),r&&A(r),j(window.location.pathname);let l=e=>{f.current&&!f.current.contains(e.target)&&b(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);let I=(e,t)=>{e.preventDefault(),j(t),g(!1),window.location.href=t};return k||localStorage.getItem("token")?(0,s.jsxs)("div",{className:"flex h-screen bg-gray-100 font-sans",children:[y&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>g(!1)}),(0,s.jsxs)("div",{className:"fixed lg:static inset-y-0 left-0 z-40 bg-white text-gray-700\n          transform ".concat(y?"translate-x-0":"-translate-x-full"," lg:translate-x-0\n          w-64\n          transition-all duration-300 ease-in-out flex flex-col border-r border-gray-200 shadow-lg"),children:[(0,s.jsxs)("div",{className:"p-4 flex items-center justify-between border-b border-gray-200 h-16",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"bg-indigo-600 p-2 rounded-lg",children:(0,s.jsx)(l.default,{src:"/logo.png",alt:"Algoman Logo",width:36,height:36})}),(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900 ml-3",children:"Algoman"})]}),(0,s.jsx)("button",{className:"lg:hidden p-1.5 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700",onClick:()=>g(!1),children:(0,s.jsx)(m.A,{size:24})})]}),(0,s.jsx)("nav",{className:"mt-6 flex-1 px-3 space-y-1",children:z.map(e=>(0,s.jsxs)("a",{href:e.path,onClick:t=>I(t,e.path),className:"group flex items-center px-3 py-3 rounded-lg transition-colors ease-in-out duration-150\n                ".concat(v===e.path?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[(0,s.jsx)("div",{className:"mr-3",children:(0,s.jsx)(e.icon,{className:"text-lg ".concat(v===e.path?"text-blue-500":"text-gray-400 group-hover:text-gray-500"),"aria-hidden":"true"})}),(0,s.jsx)("span",{className:"text-sm",children:e.label})]},e.label))}),(0,s.jsx)("div",{className:"p-4 border-t border-gray-200 mt-auto",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center text-white",children:(0,s.jsx)(u.A,{size:20})}),(0,s.jsxs)("div",{className:"ml-3 overflow-hidden",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:N}),(0,s.jsx)("div",{className:"text-xs text-gray-500 truncate",children:C})]})]})})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 h-16",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{className:"lg:hidden mr-4 p-2 rounded-md bg-indigo-600 text-white",onClick:()=>g(!0),children:(0,s.jsx)(x.A,{size:24})}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 truncate max-w-[60vw]",children:t||"Dashboard"})]}),(0,s.jsxs)("div",{className:"relative",ref:f,children:[(0,s.jsx)("button",{onClick:()=>b(!p),className:"w-9 h-9 rounded-full bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center text-white shadow-sm hover:opacity-90",children:(0,s.jsx)(u.A,{size:18})}),p&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl py-1 z-20 border border-gray-200",children:[(0,s.jsx)("div",{className:"px-4 py-3 text-sm text-gray-700 border-b border-gray-100",children:(0,s.jsx)("p",{className:"font-medium truncate",children:C})}),(0,s.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("name"),localStorage.removeItem("email"),window.location.href="/login"},className:"flex items-center w-full px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-100",children:[(0,s.jsx)(h.A,{size:16,className:"mr-2.5 text-gray-500"}),"Logout"]})]})]})]})}),(0,s.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-4 sm:p-6",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:a})})]})]}):null}}}]);